{% extends "private/base.html" %}

 {% block navigator %} {% endblock %}

{% block header-button %}

<li class="dropdown dropdown-big">
<a href="#cad_prof" data-toggle="modal"> <span class="badge badge-info"><i class="icon-plus-sign"></i></span> Novo Grupo </a> 
</li>

<li class="dropdown dropdown-big">
<a href="#cad_prof" data-toggle="modal"> <span class="badge badge-info"><i class="icon-plus-sign"></i></span> Nova Questão</a> 
</li>

<li class="dropdown dropdown-big">
<a href="#cad_prof" data-toggle="modal"> <span class="badge badge-info"><i class="icon-plus-sign"></i></span> Novo Aluno</a> 
</li>

<!-- Modal -->
	<div id="cad_prof" class="modal hide fade" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true">
		
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
			<h3 id="myModalLabel">Cadastrar Professor</h3>
		</div>
		<form name='generic_form' action="/professor/create" enctype="multipart/form-data" method="post"> {% csrf_token %}
			<div class="modal-body">
				{{ form }}
			</div>
		<div class="modal-footer">
			<button class="btn" data-dismiss="modal" aria-hidden="true">Fechar</button>
			<button type="submit" class="btn btn-primary">Cadastrar</button>
		</div>
		</form>
	</div> 
	

 {% endblock %} 
{% block header-data %} {% endblock %} 

{% block sidebar %}

<li><a href="/" class="open"><i class="icon-home"></i>Home</a>
<li><a class="has_sub"><i class="icon-list-alt"></i>Questionarios
		<span class="pull-right"> <i class="icon-chevron-right"></i></span></a>
	<ul>
		<li><a href="widgets1.html">Widgets #1</a></li>
		<li><a href="widgets2.html">Widgets #2</a></li>
		<li><a href="widgets3.html">Widgets #3</a></li>
	</ul></li>
<li><a href="/"><i class="icon-reply"></i>Submissões</a>
<li><a href="/questoes"><i class="icon-question-sign"></i>Questões</a>
<li><a class="has_sub"><i class=icon-group></i>Cadastros <span
		class="pull-right"> <i class="icon-chevron-right"></i></span></a>
	<ul>
		<li><a href="/aluno">Alunos</a></li>
		<li><a href="/professor">Professores</a></li>
		<li><a href="/grupo">Grupos</a></li>
	</ul></li>

{% endblock %} 

{% block content-title %} {% endblock %} 

{% block content-bread %} {% endblock %} 

{% block main-content %}

<div class="row-fluid">

	<!--  Questões -->
	<div class="span6">
		<div class="widget">
			<div class="widget-head">
				<div class="pull-left">Minhas Questões</div>
				<div class="widget-icons pull-right">
					<a href="#" class="wminimize"><i class="icon-chevron-up"></i></a>
				</div>
				<div class="clearfix"></div>
			</div>
			<div class="widget-content">
				{% if user.professor.get_questoes_criadas %}
				<table class="table table-striped table-bordered table-hover">
					<thead>
						<tr>
							<th>Nome</th>
							<th>Tipo</th>
							<th>Nivel</th>
							<th>Tag</th>
						</tr>
					</thead>
					<tbody>
						{% for questao in user.professor.get_questoes_criadas %}
						<a href="/questao/detail/{{questao.uid}}/{{ questao.id }}/">
							<tr>
								<td>{{ questao }}</td>
								<td>{{ questao.modulo.tipo_string }}</td>
								<td>{{ questao.nivel_estatico }}</td>
								<td>
								{% for tag in questao.get_tags %}
                          			<span class="label label-info"> {{ tag }} </span>
                          		{% endfor %}
                          		</td>
							</tr>
						</a> {% endfor %}
					</tbody>
				</table>


				{% else %}
				<div class="padd">
					<i>Nenhuma questão criada.</i>
				</div>

				<div class="clearfix"></div>
				<hr />
				{% endif %}
			</div>
			<div class="widget-foot">
				<i>Lista de Questões</i>
			</div>
		</div>
	</div>

	<!--  Grupos -->

	<div class="span6">
		<div class="widget">
			<div class="widget-head">
				<div class="pull-left">Meus Grupos</div>
				<div class="widget-icons pull-right">
					<a href="#" class="wminimize"><i class="icon-chevron-up"></i></a>
				</div>
				<div class="clearfix"></div>
			</div>

			<div class="widget-content">
				{% if user.professor.get_grupos %}
				<table class="table table-striped table-bordered table-hover">
					<thead>
						<tr>
							<th>Nome</th>
							<th>Código</th>
							<th>Membros</th>
						</tr>
					</thead>
					<tbody>
						{% for grupo in user.professor.get_grupos %}
						<a href="/questao/detail/{{ grupo.id }}/">
							<tr>
								<td>{{ grupo.nome }}</td>
								<td>{{ grupo }}</td>
								<td>{{ grupo.matriculados }}</td>
							</tr>
						</a> {% endfor %}
					</tbody>
				</table>

				{% else %}
				<div class="padd">
					<i>Nenhuma Grupo registrado.</i>
				</div>
				<div class="clearfix"></div>
				<hr />
				{% endif %}
			</div>
			<div class="widget-foot">
				<i>Lista de Grupos</i>
			</div>
		</div>
	</div>


</div>
<div class="row-fluid">

	<!--  Questionários -->
	<div class="span6">
		<div class="widget">
			<div class="widget-head">
				<div class="pull-left">Questionários</div>
				<div class="widget-icons pull-right">
					<a href="#" class="wminimize"><i class="icon-chevron-up"></i></a>
				</div>
				<div class="clearfix"></div>
			</div>

			<div class="widget-content">
				<table class="table table-striped table-bordered table-hover">
					<thead>
						<tr>
							<th>Nome</th>
							<th>Data Abertura</th>
							<th>Data Limite</th>
						</tr>
					</thead>
					<tbody>
					{% for grupo in user.professor.get_grupos %} 
						{% for questionario in grupo.questionario_set.all %}	
							<tr>
								<td>{{ questionario.nome }}</td>
								<td>{{ questionario.hora_inicio }}</td>
								<td>{{ questionario.hora_fim }}</td>
							</tr> 	
						{% endfor %}
					{% endfor %}
					</tbody>
				</table>

				<div class="clearfix"></div>
				<hr />
			</div>
			<div class="widget-foot">
				<i>Lista de Questionários</i>
			</div>
		</div>
	</div>
</div>

{% endblock %}
