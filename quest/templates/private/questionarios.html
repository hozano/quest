{% extends "private/base.html" %}

{% block hidden %}

<!-- Modal -->
	<div id="cadastro" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
			<h3 id="myModalLabel">Cadastrar Questionário</h3>
		</div>
		<form name='generic_form' action='/questionario/create' enctype="multipart/form-data" method="post"> {% csrf_token %}
			<div class="modal-body">
				{{ form }}
			</div>
		<div class="modal-footer">
			<button class="btn" data-dismiss="modal" aria-hidden="true">Fechar</button>
			<button type="submit" class="btn btn-primary">Cadastrar</button>
		</div>
		</form>
	</div> 
	
{% endblock %} 


{% block sidebar %}

<li><a href="/"><i class="icon-home"></i>Home</a>
<li><a href="/questionarios" class="open"><i class="icon-list-alt"></i>Questionarios 
<li><a href="/submissoes"><i class="icon-reply"></i>Submissões</a>
{% if perms.core.professor %}
<li><a href="/questoes"><i class="icon-question-sign"></i>Questões</a>
<li><a class="has_sub"><i class=icon-group></i>Cadastros
<span class="pull-right"> <i class="icon-chevron-right"></i></span></a>
	<ul>
		<li><a href="/aluno">Alunos</a></li>
		<li><a href="/professor">Professores</a></li>
		<li><a href="/grupo">Grupos</a></li>
	</ul></li>
{% endif %}
{% endblock %} 


{% block content-title %}  Questionários {% endblock %}


{% block content-bread %}

<a href="/"><i class="icon-home"></i> Home</a>
<!-- Divider -->
<span class="divider">/</span>
<a href="#" class="bread-current">Questionários</a>

{% endblock %}


{% block main-content %}

<div class="row-fluid">

<div class="span12">
		<div class="widget">
			<div class="widget-head">
				<div class="pull-left"> Questionários </div>
				<div class="widget-icons pull-right">
					<a href="#" class="wminimize"><i class="icon-chevron-up"></i></a>
				</div>
				<div class="clearfix"></div>
			</div>
			<div class="widget-content">
				<div class="padd">
					{% if questionarios %}
						<table class="table table-striped table-bordered table-hover">
						<thead>
							<tr>
								<th>Nome</th>
								<th>Inicio</th>
								<th>Fim</th>
								<th>Tags</th>
							</tr>
						</thead>
						<tbody>
						{% for questionario in questionarios %}
						<tr onclick="document.location = '/questionario/detail/{{ questionario.id }}';">
                          <td>{{ questionario }}</td>
                          <td>{{ questionario.hora_inicio }}</td>
                          <td>{{ questionario.hora_fim}}</td>
                          <td>
                          {% for tag in questionario.get_tags %}
                          <span class="label label-info"> {{ tag }} </span>
                          {% endfor %}
                          </td>
                        </tr>
						{% endfor %}
						</tbody>
						</table>
					{% else %}
						{% if perms.core.professor %}
						<i> Você ainda não criou nenhum questionário.</i>
						{% else %}
							<i>Nenhum Questionário.</i>
						{% endif %}
					{% endif %}
					
				</div>
				<div class="clearfix"></div>
				<hr />
				</div>
			<div class="widget-foot">
			{% if perms.core.professor %}
				<a href="#cadastro" data-toggle="modal" class="btn"> <i class="icon-plus-sign"></i> Criar Questionário </a>
			{% endif %}
			</div>
		</div>
	</div>

</div>

{% endblock %}



{% block content-questionario %}

<h2>Questionários</h2>
{% if perms.core.professor %}
	<h4>Aqui você pode criar, atualizar e visualizar os questionários já cadastrados.</h4>
{% endif %} 
<br/>

<table cellpadding="0" cellspacing="0" border="0" class="display" id="example" width="100%">
	<thead>
		<tr>
			<th>Nome</th>
			<th>Criador</th>
			<th>Tags</th>
		</tr>
	</thead>
{% for questionario in questionarios %}
	<tbody>
	<tr>
		<td><a href="/questionario/detail/{{questionario.id}}">{{questionario.nome}}</a></td>
		<td>{{questionario.get_criador}}</td>
		<td>{{questionario.get_tags_as_string|default:"Nenhuma tag associada"}}</td>
	</tr>
	</tbody>
{% endfor %}
</table>

{% endblock %}


{% block extra-js %}


<script type="text/javascript">
	$(function() {
		$input = $("input[id^='id_hora']");
		//$input.datetimepicker({format: 'dd/MM/yyyy hh:mm' });
	});
</script>

{% endblock %}